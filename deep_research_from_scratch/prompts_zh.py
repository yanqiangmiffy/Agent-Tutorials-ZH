"""深度研究系统的提示模板。

此模块包含研究工作流组件中使用的所有提示模板，
包括用户澄清、研究简报生成和报告综合。
"""

clarify_with_user_instructions="""以下是用户请求报告时到目前为止交换的消息：
<Messages>
{messages}
</Messages>

今天的日期是 {date}。

评估您是否需要询问澄清问题，或者用户是否已经提供了足够的信息让您开始研究。
重要提示：如果您在消息历史中看到您已经询问过澄清问题，几乎总是不需要再问另一个问题。只有在绝对必要时才询问另一个问题。

如果有缩写词、简称或未知术语，请要求用户澄清。
如果您需要提问，请遵循以下准则：
- 在收集所有必要信息的同时保持简洁
- 确保以简洁、结构良好的方式收集执行研究任务所需的所有信息
- 适当时使用项目符号或编号列表以提高清晰度。确保使用markdown格式，如果字符串输出传递给markdown渲染器，将正确渲染
- 不要询问不必要的信息，或用户已经提供的信息。如果您看到用户已经提供了信息，请不要再次询问

以有效的JSON格式响应，使用以下确切的键：
"need_clarification": boolean,
"question": "<询问用户澄清报告范围的问题>",
"verification": "<我们将开始研究的验证消息>"

如果您需要询问澄清问题，返回：
"need_clarification": true,
"question": "<您的澄清问题>",
"verification": ""

如果您不需要询问澄清问题，返回：
"need_clarification": false,
"question": "",
"verification": "<确认消息，表示您现在将基于提供的信息开始研究>"

对于不需要澄清时的验证消息：
- 确认您有足够的信息继续进行
- 简要总结您从他们的请求中理解的关键方面
- 确认您现在将开始研究过程
- 保持消息简洁和专业
"""

transform_messages_into_research_topic_prompt = """您将获得到目前为止您和用户之间交换的一组消息。
您的工作是将这些消息转换为更详细和具体的研究问题，用于指导研究。

到目前为止您和用户之间交换的消息是：
<Messages>
{messages}
</Messages>

今天的日期是 {date}。

您将返回一个用于指导研究的单一研究问题。

准则：
1. 最大化具体性和细节
- 包括所有已知的用户偏好，并明确列出要考虑的关键属性或维度
- 重要的是，用户的所有细节都包含在说明中

2. 谨慎处理未说明的维度
- 当研究质量需要考虑用户未指定的其他维度时，将它们确认为开放考虑而不是假设的偏好
- 示例：不要假设"预算友好的选项"，而是说"考虑所有价格范围，除非指定了成本约束"
- 只提及在该领域进行全面研究真正必要的维度

3. 避免无根据的假设
- 永远不要编造用户未说明的具体偏好、约束或要求
- 如果用户没有提供特定细节，明确注明这种缺乏规范
- 指导研究人员将未指定的方面视为灵活的，而不是做出假设

4. 区分研究范围和用户偏好
- 研究范围：应该调查什么主题/维度（可以比用户明确提及的更广泛）
- 用户偏好：具体的约束、要求或偏好（必须只包括用户说明的内容）
- 示例："研究旧金山咖啡店的咖啡质量因素（包括豆类采购、烘焙方法、冲泡技术），主要关注用户指定的口味"

5. 使用第一人称
- 从用户的角度表达请求

6. 来源
- 如果应该优先考虑特定来源，在研究问题中指定它们
- 对于产品和旅行研究，优先直接链接到官方或主要网站（例如，官方品牌网站、制造商页面或亚马逊等信誉良好的电子商务平台用于用户评论），而不是聚合网站或SEO重的博客
- 对于学术或科学查询，优先直接链接到原始论文或官方期刊出版物，而不是调查论文或二次摘要
- 对于人物，尝试直接链接到他们的LinkedIn个人资料，或者如果他们有个人网站的话
- 如果查询是特定语言，优先考虑以该语言发布的来源
"""


# 网页摘要提示词

summarize_webpage_prompt = """您的任务是总结从网络搜索中获取的网页原始内容。您的目标是创建一个摘要，保留原始网页中最重要的信息。这个摘要将被下游研究代理使用，因此在不丢失关键信息的情况下保持重要细节是至关重要的。

以下是网页的原始内容：

<webpage_content>
{webpage_content}
</webpage_content>

请遵循以下准则来创建您的摘要：

1. 识别并保留网页的主题或目的。
2. 保留对内容核心信息至关重要的关键事实、统计数据和数据点。
3. 保留来自可信来源或专家的重要引用。
4. 如果内容具有时效性或历史性，请保持事件的时间顺序。
5. 如果存在列表或分步说明，请予以保留。
6. 包含对理解内容至关重要的相关日期、姓名和地点。
7. 在保持核心信息完整的同时总结冗长的解释。

处理不同类型内容时：

- 对于新闻文章：重点关注人物、事件、时间、地点、原因和方式。
- 对于科学内容：保留方法论、结果和结论。
- 对于观点文章：保持主要论点和支持要点。
- 对于产品页面：保留关键功能、规格和独特卖点。

您的摘要应该比原始内容明显更短，但要足够全面，能够独立作为信息来源。目标是原始长度的25-30%，除非内容本身已经很简洁。

请按以下格式呈现您的摘要：

```
{{
   "summary": "您的摘要内容，根据需要使用适当的段落或要点结构",
   "key_excerpts": "第一个重要引用或摘录, 第二个重要引用或摘录, 第三个重要引用或摘录, ...根据需要添加更多摘录，最多5个"
}}
```

以下是两个良好摘要的示例：

示例1（新闻文章）：
```json
{{
   "summary": "2023年7月15日，美国国家航空航天局（NASA）成功从肯尼迪航天中心发射了阿尔忒弥斯二号任务。这标志着自1972年阿波罗17号以来首次载人登月任务。由指挥官简·史密斯领导的四人机组将环绕月球10天后返回地球。这次任务是NASA计划在2030年在月球建立永久人类基地的关键步骤。",
   "key_excerpts": "阿尔忒弥斯二号代表了太空探索的新时代，NASA局长约翰·多伊说道。该任务将测试未来在月球长期停留的关键系统，首席工程师莎拉·约翰逊解释说。我们不仅仅是要重返月球，我们是要向前推进到月球，指挥官简·史密斯在发射前新闻发布会上表示。"
}}
```

示例2（科学文章）：
```json
{{
   "summary": "发表在《自然·气候变化》上的一项新研究显示，全球海平面上升速度比此前预想的更快。研究人员分析了1993年至2022年的卫星数据，发现在过去三十年中，海平面上升速度加速了0.08毫米/年²。这种加速主要归因于格陵兰岛和南极洲冰盖的融化。该研究预测，如果当前趋势继续，到2100年全球海平面可能上升多达2米，对全世界沿海社区构成重大风险。",
   "key_excerpts": "我们的发现表明海平面上升明显加速，这对沿海规划和适应策略具有重要意义，首席作者艾米莉·布朗博士表示。研究报告显示，格陵兰岛和南极洲的冰盖融化速度自1990年代以来增加了三倍。如果不立即大幅减少温室气体排放，到本世纪末我们将面临潜在的灾难性海平面上升，共同作者迈克尔·格林教授警告说。"
}}
```

请记住，您的目标是创建一个易于理解且可被下游研究代理利用的摘要，同时保留原始网页中最关键的信息。

今天的日期是 {date}。
"""